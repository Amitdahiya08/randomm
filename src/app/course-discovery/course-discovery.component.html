<app-header></app-header>

<div class="course-discovery container-xxl py-4">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-lg-3 mb-4">
            <app-filters-sidebar (filtersChange)="onFiltersChange($event)"></app-filters-sidebar>
        </div>

        <!-- Main content -->
        <div class="col-lg-9">
            <!-- Header -->
            <div class="results-header d-flex justify-content-between align-items-center mb-3 black-text-inputs">
                <div class="summary">{{ filtered().length }} Results</div>
                <mat-form-field appearance="fill" class="sort-field">
                    <mat-label>Sort</mat-label>
                    <mat-select [value]="sort()" (valueChange)="onSortChange($event)">
                        <mat-option value="latest">Latest</mat-option>
                        <mat-option value="rating">Highest Rating</mat-option>
                        <mat-option value="reviews">Highest Reviewed</mat-option>
                        <mat-option value="az">A-Z</mat-option>
                        <mat-option value="za">Z-A</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <!-- Grid -->
            <div class="course-grid row g-3">
                @for (course of paginated(); track course.id) {
                <div class="col-md-6 col-lg-4">
                    <a class="no-decoration" [routerLink]="['/courses', course.id]">
                        <app-course-card [thumbnailUrl]="course.thumbnailUrl" [title]="course.title"
                            [provider]="course.provider.name" [rating]="course.rating"
                            [reviewCount]="course.reviewCount" [enrollmentCount]="course.enrollmentCount"
                            [difficulty]="course.difficulty" [durationText]="course.durationText"
                            badgeText="New Launch">
                        </app-course-card>
                    </a>
                </div>
                }
            </div>


            <!-- Pagination -->
            @if (totalPages() > 1) {
            <div class="pagination-wrap d-flex justify-content-center mt-4">
                <button type="button" mat-stroked-button (click)="goToPreviousPage()"
                    [disabled]="!canGoToPreviousPage()">Prev</button>
                <span class="px-3">Page {{ page() }} of {{ totalPages() }}</span>
                <button type="button" mat-stroked-button (click)="goToNextPage()"
                    [disabled]="!canGoToNextPage()">Next</button>
            </div>
            }
        </div>
    </div>
</div>